<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <h2>User Settings</h2>
      <form [formGroup]="settingsForm">

        <div class="col-xs-12 col-sm-12 col-md-6">
          <div class="form-group">
            <label for="settings-email">Email</label>
            <input type="text" id="settings-email" formControlName="settings-email" class="form-control">
            <span *ngIf="!settingsForm.get('settings-email').valid && settingsForm.get('settings-email').touched" class="help-block">
            <span *ngIf="settingsForm.get('settings-email').errors['required']">Please input your email</span>
            <span *ngIf="settingsForm.get('settings-email').errors['email'] && !settingsForm.get('settings-email').errors['required']">Please enter a valid email</span>
            </span>
            <span *ngIf="settingsForm.get('settings-email').valid && settingsForm.get('settings-email').touched && settingsForm.get('settings-email').dirty"
              class="help-block">
            <span><img src="../../../../assets/img/ok-green.png" alt="ok-green"></span>
            </span>
          </div>
          <div class="form-group">
            <label for="settings-username">User Name</label>
            <input type="text" id="settings-username" formControlName="settings-username" class="form-control">
            <span *ngIf="modifyUser && !userAsync &&!settingsForm.get('settings-username').valid && settingsForm.get('settings-username').touched"
              class="help-block">
              <span *ngIf="settingsForm.get('settings-username').errors['required']">Please input your User Name</span>
            <span *ngIf="settingsForm.get('settings-username').errors['minlength']">The password must contain at least four characters</span>
            </span>
            <span *ngIf="pending"><img src="../../../../assets/img/pending.png" alt="pending-orange"></span>
            <span *ngIf="modifyUser && userAsync && settingsForm.get('settings-username').valid && settingsForm.get('settings-username').touched && settingsForm.get('settings-username').dirty"
              class="help-block">
            <span><img src="../../../../assets/img/ok-green.png" alt="ok-green"></span>
            </span>
            <div *ngIf="updateUserNameSuccess" class="help-block bg-success">
              <p>User Name Updated Correctly</p>
            </div>
            <div *ngIf="updateUserNameError" class="help-block bg-warning">
              <p>User Name couldn´t Update - Please try again later</p>
            </div>
          </div>
          <button *ngIf="!modifyUser" type="button" class="btn btn-primary mod-user" (click)="onModifyUser()"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit your User</button>
          <button *ngIf="modifyUser" type="button" class="btn btn-primary mod-user" (click)="onModifyUser()"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Cancel Edition</button>
          <button *ngIf="modifyUser" type="button" [disabled]="!settingsForm.get('settings-username').valid" class="btn btn-success"
            (click)="onUpdateUserName()">Update User Name</button>
          <button *ngIf="modifyUser" type="button" class="btn btn-warning" (click)="onClearUser()">Clear</button>
          <hr>
          <div class="form-group">
            <label for="settings-password">Password</label>
            <input type="password" id="settings-password" formControlName="settings-password" class="form-control">
            <span *ngIf="!settingsForm.get('settings-password').valid && settingsForm.get('settings-password').touched" class="help-block">
            <span *ngIf="settingsForm.get('settings-password').errors['required']">Please input your password</span>
            <span *ngIf="settingsForm.get('settings-password').errors['minlength']">The password must contain at least six characters</span>
            </span>
            <span *ngIf="settingsForm.get('settings-password').valid && settingsForm.get('settings-password').touched && settingsForm.get('settings-password').dirty"
              class="help-block">
            <span><img src="../../../../assets/img/ok-green.png" alt="ok-green"></span>
            </span>
          </div>
          <button *ngIf="!modifyPassword" type="button" class="btn btn-primary" (click)="onModifyPassword()"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit your Password</button>
          <button *ngIf="modifyPassword" type="button" class="btn btn-primary" (click)="onModifyPassword()"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Cancel Edition</button>
          <div *ngIf="modifyPassword">
            <div class="form-group">
              <label for="settings-oldpassword">Old Password</label>
              <input type="password" id="settings-oldpassword" formControlName="settings-oldpassword" class="form-control">
              <span *ngIf="modifyPassword && !settingsForm.get('settings-oldpassword').valid && settingsForm.get('settings-oldpassword').touched"
                class="help-block">
                <span *ngIf="settingsForm.get('settings-oldpassword').errors['required']">Please input your password</span>
              <span *ngIf="settingsForm.get('settings-oldpassword').errors['minlength']">The password must contain at least six characters</span>
              <span *ngIf="!settingsForm.get('settings-oldpassword').errors['required'] && settingsForm.get('settings-oldpassword').errors['passwordsDoNotMatch']">The password must match the old password</span>
              </span>
              <span *ngIf="settingsForm.get('settings-oldpassword').valid && settingsForm.get('settings-oldpassword').touched && settingsForm.get('settings-oldpassword').dirty"
                class="help-block">
                <span><img src="../../../../assets/img/ok-green.png" alt="ok-green"></span>
              </span>
            </div>
            <div class="form-group">
              <label for="settings-newpassword">New Password</label>
              <input type="password" id="settings-newpassword" formControlName="settings-newpassword" class="form-control">
              <span *ngIf="modifyPassword && !settingsForm.get('settings-newpassword').valid && settingsForm.get('settings-newpassword').touched"
                class="help-block">
            <span *ngIf="settingsForm.get('settings-newpassword').errors['required']">Please input your password</span>
              <span *ngIf="settingsForm.get('settings-newpassword').errors['minlength']">The password must contain at least six characters</span>
              </span>
              <span *ngIf="settingsForm.get('settings-newpassword').valid && settingsForm.get('settings-newpassword').touched && settingsForm.get('settings-newpassword').dirty"
                class="help-block">
            <span><img src="../../../../assets/img/ok-green.png" alt="ok-green"></span>
              </span>
            </div>
            <div class="form-group">
              <label for="modifyPassword && settings-passwordconfirm"> Confirm your Password</label>
              <input type="password" id="settings-passwordconfirm" formControlName="settings-passwordconfirm" class="form-control">
              <span *ngIf="!settingsForm.get('settings-passwordconfirm').valid && settingsForm.get('settings-passwordconfirm').touched"
                class="help-block">
                <span *ngIf="settingsForm.get('settings-passwordconfirm').errors['required']">Please confirm your password</span>
              <span *ngIf="!settingsForm.get('settings-passwordconfirm').errors['required'] && settingsForm.get('settings-passwordconfirm').errors['passwordsDoNotMatch']">The passwords must match</span>
              </span>
              <span *ngIf="settingsForm.get('settings-passwordconfirm').valid && settingsForm.get('settings-passwordconfirm').touched && settingsForm.get('settings-passwordconfirm').dirty"
                class="help-block">
                <span><img src="../../../../assets/img/ok-green.png" alt="ok-green"></span>
              </span>
              <div *ngIf="updatePasswordSuccess" class="help-block bg-success">
                <p>User Password Updated Correctly</p>
              </div>
              <div *ngIf="updatePasswordError" class="help-block bg-warning">
                <p>User Password couldn´t Update - Please try again later</p>
              </div>
            </div>
            <button *ngIf="modifyPassword" type="button" [disabled]="modifyPasswordValid()" class="btn btn-success" (click)="onUpdatePassword()">Update your Password</button>
            <button *ngIf="modifyPassword" type="button" class="btn btn-warning" (click)="onClearPassword()">Clear</button>
          </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-6">
          <div class="form-group">
            <label for="settings-name">Name</label>
            <input type="text" id="settings-name" formControlName="settings-name" class="form-control">
            <span *ngIf="modify && !settingsForm.get('settings-name').valid && settingsForm.get('settings-name').touched" class="help-block">
              <span *ngIf="settingsForm.get('settings-name').errors['required']">Please input your name</span>
            </span>
            <span *ngIf="settingsForm.get('settings-name').valid && settingsForm.get('settings-name').touched && settingsForm.get('settings-name').dirty"
              class="help-block">
              <span><img src="../../../../assets/img/ok-green.png" alt="ok-green"></span>
            </span>
          </div>
          <div class="form-group">
            <label for="settings-sirname">Sirname</label>
            <input type="text" id="settings-sirname" formControlName="settings-sirname" class="form-control">
            <span *ngIf="modify && !settingsForm.get('settings-sirname').valid && settingsForm.get('settings-sirname').touched" class="help-block">
            <span *ngIf="settingsForm.get('settings-sirname').errors['required']">Please input your sirname</span>
            </span>
            <span *ngIf="settingsForm.get('settings-sirname').valid && settingsForm.get('settings-sirname').touched && settingsForm.get('settings-sirname').dirty"
              class="help-block">
            <span><img src="../../../../assets/img/ok-green.png" alt="ok-green"></span>
            </span>
          </div>
          <div class="form-group">
            <label for="settings-adress">Adress</label>
            <input type="text" id="settings-adress" formControlName="settings-adress" class="form-control">
            <span *ngIf="modify && !settingsForm.get('settings-adress').valid && settingsForm.get('settings-adress').touched" class="help-block">
            <span *ngIf="settingsForm.get('settings-adress').errors['required']">Please input your adress</span>
            </span>
            <span *ngIf="settingsForm.get('settings-adress').valid && settingsForm.get('settings-adress').touched && settingsForm.get('settings-adress').dirty"
              class="help-block">
            <span><img src="../../../../assets/img/ok-green.png" alt="ok-green"></span>
            </span>
          </div>
          <div class="form-group">
            <label for="settings-city">City</label>
            <input type="text" id="settings-city" formControlName="settings-city" class="form-control">
            <span *ngIf="modify && !settingsForm.get('settings-city').valid && settingsForm.get('settings-city').touched" class="help-block">
            <span *ngIf="settingsForm.get('settings-city').errors['required']">Please input your city</span>
            </span>
            <span *ngIf="settingsForm.get('settings-city').valid && settingsForm.get('settings-city').touched && settingsForm.get('settings-city').dirty"
              class="help-block">
            <span><img src="../../../../assets/img/ok-green.png" alt="ok-green"></span>
            </span>
          </div>
          <div class="form-group">
            <label for="settings-country">Country</label>
            <input type="text" id="settings-country" formControlName="settings-country" class="form-control">
            <span *ngIf="modify && !settingsForm.get('settings-country').valid && settingsForm.get('settings-country').touched" class="help-block">
            <span *ngIf="settingsForm.get('settings-country').errors['required']">Please input your country</span>
            </span>
            <span *ngIf="settingsForm.get('settings-country').valid && settingsForm.get('settings-country').touched && settingsForm.get('settings-country').dirty"
              class="help-block">
            <span><img src="../../../../assets/img/ok-green.png" alt="ok-green"></span>
            </span>
            <div *ngIf="updateInfoSuccess" class="help-block bg-success">
              <p>User Info Updated Correctly</p>
            </div>
            <div *ngIf="updateInfoError" class="help-block bg-warning">
              <p>User Info couldn´t Update - Please try again later</p>
            </div>
          </div>
          <div class="text-center">
            <button *ngIf="!modify" type="button" class="btn btn-primary" (click)="onModify()"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Modify</button>
            <button *ngIf="modify" type="button" class="btn btn-primary" (click)="onModify()"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Cancel Edition</button>
            <button *ngIf="modify" type="submit" [disabled]="modifyValid()" class="btn btn-success" (click)="onUpdateInfo()">Update your info</button>
            <button *ngIf="modify" type="button" class="btn btn-warning" (click)="onClear()">Clear</button>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>